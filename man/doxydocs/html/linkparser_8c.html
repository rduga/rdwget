<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RDWGET: /home/rado/workspace/rdwget/src/linkparser.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>/home/rado/workspace/rdwget/src/linkparser.c File Reference</h1>Simple libraray for parsing links, validating directories and manipilating strings (char *).  
<a href="#_details">More...</a>
<p>
<code>#include &lt;regex.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &quot;<a class="el" href="linkparser_8h-source.html">linkparser.h</a>&quot;</code><br>

<p>
<a href="linkparser_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#779b61947baa11b3016dff377bc6dc55">_trim</a> (char *str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Strips whitespaces from the beginning and end of a string.  <a href="#779b61947baa11b3016dff377bc6dc55"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#b2088077051f7410f3f448e1249f8e30">_strtok</a> (char **holder, char *s, const char *delim)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extract tokens from strings.  <a href="#b2088077051f7410f3f448e1249f8e30"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#0620fea9dcf64cb62c200429a7785d0b">_sprintf</a> (int num, char **filledstr, const char *format,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#e0b089caf24844b08e3795b516af8ae6">strtoprot</a> (char *str, <a class="el" href="defaults_8h.html#fd636896b1f6e43aacdb4c31b5da5036">protocols</a> *prots)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts string in str to protocols type contained in prots.  <a href="#e0b089caf24844b08e3795b516af8ae6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#9f80a071f6420091d0392a662a430ef2">_strnlen</a> (const char *str, size_t maxlen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">GNU like function for determining length of string due to maxlen.  <a href="#9f80a071f6420091d0392a662a430ef2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#a91c9788e72f65a270d92e8e7a690355">_strndup</a> (char *str, size_t num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">GNU like function for copying substring of limited length num.  <a href="#a91c9788e72f65a270d92e8e7a690355"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#949d35cc0cf68ce2d17b41b5dc78de08">link_parse</a> (char *linkstr, <a class="el" href="structlnk.html">lnk</a> *link)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parses http link and saves parsed info into <a class="el" href="structlnk.html">lnk</a> structure.  <a href="#949d35cc0cf68ce2d17b41b5dc78de08"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#613aaf9cf7b0a71ac4f620e013bc75fc">match</a> (const char *string, char *pattern)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function for matching string due to specified pattern (using rexex.h).  <a href="#613aaf9cf7b0a71ac4f620e013bc75fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#020b81203bb4ff5f1dcd1fbb2fb63551">_strcat</a> (const char *first, const char *second)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#1ef420e8b425092376b9d8a4ca8fa1c7">_strtr</a> (char *str, char from, char to)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Translates characters from into to in string str.  <a href="#1ef420e8b425092376b9d8a4ca8fa1c7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="linkparser_8c.html#abe5b5fd5f8cb1a1a70442b3e642958a">mk_filename</a> (const char *resultdir, <a class="el" href="structlnk.html">lnk</a> *link)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks resultdir if contains trailing slash (if not adds it) and creates full path to filename (consisted from link-&gt;hostname and link-&gt;rquri) by replacing denied characters (slash) in filename by _.  <a href="#abe5b5fd5f8cb1a1a70442b3e642958a"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Simple libraray for parsing links, validating directories and manipilating strings (char *). 
<p>

<p>Definition in file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="0620fea9dcf64cb62c200429a7785d0b"></a><!-- doxytag: member="linkparser.c::_sprintf" ref="0620fea9dcf64cb62c200429a7785d0b" args="(int num, char **filledstr, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t _sprintf           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>filledstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00062">62</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="020b81203bb4ff5f1dcd1fbb2fb63551"></a><!-- doxytag: member="linkparser.c::_strcat" ref="020b81203bb4ff5f1dcd1fbb2fb63551" args="(const char *first, const char *second)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* _strcat           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>second</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new string consisting from first and second, can be deleted with free function </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00220">220</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="a91c9788e72f65a270d92e8e7a690355"></a><!-- doxytag: member="linkparser.c::_strndup" ref="a91c9788e72f65a270d92e8e7a690355" args="(char *str, size_t num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* _strndup           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
GNU like function for copying substring of limited length num. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new allocated sting of slecified length. </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00128">128</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="9f80a071f6420091d0392a662a430ef2"></a><!-- doxytag: member="linkparser.c::_strnlen" ref="9f80a071f6420091d0392a662a430ef2" args="(const char *str, size_t maxlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t _strnlen           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>maxlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
GNU like function for determining length of string due to maxlen. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>size of string. </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00117">117</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="b2088077051f7410f3f448e1249f8e30"></a><!-- doxytag: member="linkparser.c::_strtok" ref="b2088077051f7410f3f448e1249f8e30" args="(char **holder, char *s, const char *delim)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* _strtok           </td>
          <td>(</td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>holder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>delim</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Extract tokens from strings. 
<p>
Similar to strtok function but added holder to enable tokenize more strings across. <dl class="return" compact><dt><b>Returns:</b></dt><dd>extraceted token. </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00046">46</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="1ef420e8b425092376b9d8a4ca8fa1c7"></a><!-- doxytag: member="linkparser.c::_strtr" ref="1ef420e8b425092376b9d8a4ca8fa1c7" args="(char *str, char from, char to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* _strtr           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>to</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Translates characters from into to in string str. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>modified string. </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00236">236</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="779b61947baa11b3016dff377bc6dc55"></a><!-- doxytag: member="linkparser.c::_trim" ref="779b61947baa11b3016dff377bc6dc55" args="(char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* _trim           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Strips whitespaces from the beginning and end of a string. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ponter to begining of trimmed string. </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00021">21</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="949d35cc0cf68ce2d17b41b5dc78de08"></a><!-- doxytag: member="linkparser.c::link_parse" ref="949d35cc0cf68ce2d17b41b5dc78de08" args="(char *linkstr, lnk *link)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int link_parse           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>linkstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnk.html">lnk</a> *&nbsp;</td>
          <td class="paramname"> <em>link</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses http link and saves parsed info into <a class="el" href="structlnk.html">lnk</a> structure. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, else -1 (if linkstr is not valid http link) </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00146">146</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="613aaf9cf7b0a71ac4f620e013bc75fc"></a><!-- doxytag: member="linkparser.c::match" ref="613aaf9cf7b0a71ac4f620e013bc75fc" args="(const char *string, char *pattern)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int match           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>pattern</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function for matching string due to specified pattern (using rexex.h). 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on fail. </dd></dl>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00194">194</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="abe5b5fd5f8cb1a1a70442b3e642958a"></a><!-- doxytag: member="linkparser.c::mk_filename" ref="abe5b5fd5f8cb1a1a70442b3e642958a" args="(const char *resultdir, lnk *link)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mk_filename           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>resultdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlnk.html">lnk</a> *&nbsp;</td>
          <td class="paramname"> <em>link</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks resultdir if contains trailing slash (if not adds it) and creates full path to filename (consisted from link-&gt;hostname and link-&gt;rquri) by replacing denied characters (slash) in filename by _. 
<p>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00252">252</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="e0b089caf24844b08e3795b516af8ae6"></a><!-- doxytag: member="linkparser.c::strtoprot" ref="e0b089caf24844b08e3795b516af8ae6" args="(char *str, protocols *prots)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void strtoprot           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="defaults_8h.html#fd636896b1f6e43aacdb4c31b5da5036">protocols</a> *&nbsp;</td>
          <td class="paramname"> <em>prots</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Converts string in str to protocols type contained in prots. 
<p>

<p>Definition at line <a class="el" href="linkparser_8c-source.html#l00097">97</a> of file <a class="el" href="linkparser_8c-source.html">linkparser.c</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Feb 26 02:02:05 2009 for RDWGET by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
